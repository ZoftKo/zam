---
title: First Prototype
nav_order: 3
layout: page
permalink: /mc1496-v1
parent: Transmitters
math: katex
---
# MC1496 Prototype
This is a very crude prototype meant to become familiar with the MC1496 which will be used as the AM modulator. 
It will be driven from a 9V source so that it can be driven easily from a battery.

Besides providing suitable signals (carrier and message), the only other challenge at first glance is DC biasing. The 
datasheet says (paraphrasing) the following:

* Output pins most positive.
* Carrier pins second most positive.
* Modulating pins third most positive.

Modulating pins must be 2.7V above pin 5 (the bias pin), and carrier pins must be 2.7V above modulating pins. Finally,
output pins must be 2V above carrier pins. All of this talking about DC. 

Pin 5 is the bias pin. It is used to set the current for the constant current source. The datasheet
recommends biasing it with a 1mA current. Pin 5 has a diode and 500$$\Omega$$ resistor to ground. The diode has a
0.75 volt drop at ambient temperature. This means there are $$0.75 + 500 * 10^{-3} = 1.25$$ volts at pin 5.

So in conclusion:
* Modulating pins (1, 4) should be at 3.95V, adding some extra voltage for safety, and the fact resistors come in
standard values we can leave it at 4.1V.
* Carrier pins (8, 10) must be at 6.8V, again we can give some extra headroom and leave it at 7V or so.
* Output pins (6, 12) must be at 9V.

Therefore, output pins will be driven with an inductor instead of a resistor, to short them to 9V (on DC). This is a
neat trick to use when DC biasing with voltage headroom constraints.

The carrier was provided by the 1MHz Pierce Oscillator previously designed and documented [here.]({{ site.baseurl }}{% link docs/pierce/pierce-1m-design.md %})
A voltage divider with a potentiometer was used to lower down the oscillator output from 700mV to
60-300mV. The baseband or modulating signal came cellphone's aux jack. The RV2 potentiometer controls the modulation index.

High enough audio levels will cause over-modulation, since there is no control on the audio signal levels. Implementing
some sort of AGC is probably a good idea.


## Schematic
{% include figure.html
file="assets/img/mc1496-v1/schematic.png"
caption="Schematic for the MC1496 transmitter prototype."
%}

## Soldered Board
The layout was tricky. Some resistors and capacitors had to be soldered "SMD" style on the back. Current consumption
is of around 11.36mA.
{% include figure.html
file="assets/img/mc1496-v1/board.jpg"
caption="Soldered perf-board. Extends on the board used for the oscillator."
%}

## Results
### Transmission
The range is pretty poor, as expected, but at least it can be picked up. Range was probably 10cm at beast. Audio sounded
OK from my tests.
{% include video.html
url="https://www.youtube-nocookie.com/embed/MBk8WKM4mkQ"
caption="Transmitter being picked up by commercial AM radio receiver."
%}


### Waveform
{% include figure.html
file="assets/img/mc1496-v1/wave.png"
caption="In yellow the modulator's output. In purple the baseband signal."
%}

### Frequency Spectrum
I think the noise floor can be reduced. Will be on the list for next iteration.
{% include figure.html
file="assets/img/mc1496-v1/fft.png"
caption="Frequency spectrum of the modulated signal."
%}

### Modulation Index
The modulation index in this picture is of around 80%, as mentioned before it can be controlled with a potentiometer.
Could be a nice idea to add automatic modulation index correction. In order to do this the bias voltage at pin 4
must be set to be above pin 1 by the amplitude of the modulating signal.

For example, if $$V_1 = 4$$V, and $$A_m = 150$$mV then to obtain a near perfect modulation index $$V_4 = 4.150$$V. This
keeps the whole AC signal above 4V.

{% include figure.html
file="assets/img/mc1496-v1/mod-index.png"
caption="Frequency spectrum of the modulated signal."
%}

## Conclusions
I am happy with the results. The device is not really useful, but it proves a method to bias and use the MC1496 mixer,
now all that is left (as if it was easy) is to perfect the signal integrity by improving the oscillator design in
order to provide a cleaner carrier, and to provide ACG for the modulating signal, in order to avoid over modulation. 

A good output stage will also be needed, and antennas will need to be domesticated in order to reach the 250m transmission
range I have set as a goal.
